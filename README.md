# ポケモン対戦情報支援ツール
　ポケモン対戦で相手のポケモンのことがわからない時にまずやることは、[ポケモンバトルデータベース](https://sv.pokedb.tokyo/pokemon/list)でポケモンの情報を調べること。  
 　でも、いちいちポケモン名を入力しないといけないのはちょっとメンドウ。そんな面倒をちょっとだけ助けてくれる、そんなツールです。

<p align="center">
  <img height=300 src="https://github.com/user-attachments/assets/19b8a201-9267-4cc4-885e-21bf81c92a74">
  <img height=300 src="https://github.com/user-attachments/assets/19f7c956-88d9-4604-ac13-a6312bb74e84">
</p>


---
## 概要
- ポケモンSVの対戦画面を読み込み、相手の手持ちポケモンの情報を簡単に表示できる対戦支援ツール
- [ポケモンバトルデータベース](https://sv.pokedb.tokyo/ "ポケモンバトルデータベース")へのアクセスを簡略化し、プレイヤー自身で調べる手間を減らす

# 開発環境
- Python 3.11.9
- Tesseract

## 環境構築
```console
cd pkbattletool
pip install -r requirements.txt
```

## 実行
```concole
python main.py
```

## 使用方法
1. 左上の設定から環境設定を開く
2. Tesseract-OCRのフォルダパスを通す
3. ゲーム画面を映したカメラのIDを選択する
4. chrome.exeのパスを通す
5. 設定を更新してツールを再起動
6. キャプチャー起動ボタンを押す

### ※ゲーム画面を映したカメラIDがわからない場合
[カメラIDサーチャー](./Search_CameraID)を使用することで、アクティブになっているカメラを調べることが出来ます。

---
## 画面の見方
<p align="center">
  <img width=800 src=https://github.com/user-attachments/assets/db7f1b20-e29e-489b-a10b-03450a55d40b>
</p>

1. 現在の場に出ている相手のポケモン  
  ```盤面右上のポケモン名を読み取り表示```
2. 相手の手持ち一覧  
  ```対戦開始前の選出画面から読み取った相手の手持ち一覧```
  - アイコンを左クリックすることで、明暗の切り替えができる
3. 詳細メニュー  
  ```アイコン上で右クリックすることで表示```
  - Hashを追加
    -アイコン識別のためのHash値をcsvに追加する
  - Hashを更新
    -  登録済みのHash値を更新する  
    ```
    ※注意
    更新を押すと、アイコン横に表示されているポケモン名の識別が更新されます。
    ポケモン名とアイコンが一致している or 正しいポケモン名がカッコで囲われている場合にのみ操作してください
    ```
   - DBを検索
     - ポケモンデータベースで検索する
   - 詳細を表示
     - ポケモンの詳細情報を表示する


## 注意点
このツールは未完成版です。使用にあたって以下の問題が残存じています。
1. 動作が不安定
   - ウィンドウへのカメラ映像の描画や、その他操作時などに動作が重くなります
2. ポケモンの誤認識
   - 現在の場に出ているポケモンの認識は、ネームボックス上のポケモン名を認識しているため、誤認識が生じることがあります
   - また、フォルムの認識はすることが出来ないため、情報の表記に間違いがあることもあります
3. 手持ちポケモンのアイコン識別の誤認識
   - 現時点で手持ち一覧の識別が出来るポケモンはごく一部のみのため、識別出来ないポケモンが多々います
   - 登録されていないポケモンや、誤認識をしたポケモンがいた場合、自身で登録をしてください。

<!---

# 使用技術
## 画像認識
### [dHash方式によるポケモン画像判別](https://note.com/kaseki_mtg/n/n6df12de8981a "openCVでdHash方式のポケモン画像判別")
1. 相手の手持ち選出画面を切り抜く
2. 各ポケモンを切り抜く
3. 二値変換を行う
4. 9x8サイズにリサイズする
5. Hash値を求める
6. DBと照合し、Hash値が類似するポケモンを調べる

|選出画面|輪郭切り抜き|二値変換|リサイズ(9x8)|Hash|
|:-:|:-:|:-:|:-:|:-:|
|<img src="https://github.com/ando1912/PkBattleTool/assets/127027317/30ce9525-4554-4e40-b063-226407d6a881" width="200">|![240114002603_2](https://github.com/ando1912/PkBattleTool/assets/127027317/a826e125-efb6-41d9-a8da-c7a49d64efd1)|![240114002603_2](https://github.com/ando1912/PkBattleTool/assets/127027317/08b8d76e-cc4e-4967-9536-de007aba4036)|![20240409141105](https://github.com/ando1912/PkBattleTool/assets/127027317/60de3b37-128a-4ecd-9e67-92993ef7eeb6)|F0 28 B0 F1 E6 F0 F0 F1|

--->

# これから開発したいなーと思ってること
- 画像認識精度のブラッシュアップ
  - 選出画面アイコンでの判別から、3Dグラフィックからの画像認識へ
- 動作の安定化
  - 内部処理の効率化を進め、動作を安定させる
- ユーザーのソフトウェア操作の削減
  - ウィンドウの操作部分を減らし、画面表示の自動化を進める
- 相手パーティーの分析
  - パーティー構築の分析や過去に対戦した類似パーティなどの情報の表示
- 対戦ログ・戦績の記録
