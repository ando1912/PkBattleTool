# ポケモン対戦情報支援ツール
　ポケモン対戦で相手のポケモンのことがわからない時にまずやることは、[ポケモンバトルデータベース](https://sv.pokedb.tokyo/pokemon/list)でポケモンの情報を調べること。  
 　でも、いちいちポケモン名を入力しないといけないのはちょっとメンドウ。そんな面倒をちょっとだけ助けてくれる、そんなツールです。

<p align="center">
  <img height=300 src="https://github.com/user-attachments/assets/19b8a201-9267-4cc4-885e-21bf81c92a74">
  <img height=300 src="https://github.com/user-attachments/assets/19f7c956-88d9-4604-ac13-a6312bb74e84">
</p>


---
## 概要
- ポケモンSVの対戦画面を読み込み、相手の手持ちポケモンの情報を簡単に表示できる対戦支援ツール
- [ポケモンバトルデータベース](https://sv.pokedb.tokyo/ "ポケモンバトルデータベース")へのアクセスを簡略化し、プレイヤー自身で調べる手間を減らす

![システムイメージ](https://github.com/user-attachments/assets/816f2d6f-2815-4e4e-914d-e1c15f5a9b5c)

## 開発・動作環境
- WIndows10
- Python 3.11.9
- Anaconda 24.1.2
- Tesseract-OCR 5.4.0

## 実行環境構築
### 1. Tesseractのインストール
本ツールでは、ポケモン名認識などにTesseractr OCRを使用しています。  
[Tesseract OCR をWindowsにインストールする方法](https://gammasoft.jp/blog/tesseract-ocr-install-on-windows/)を参考にしながらインストールしてください

### 2. Anacondaの仮想環境の構築
```console
conda create -n PkBattleTool python=3.11.9
conda activate PkBattleTool
```
### 3. ソースコードのダウンロードと使用ライブラリのインストール
```console
git clone https://github.com/ando1912/PkBattleTool.git
cd PkBattleTool/pkbattletool
pip install -r requirements.txt
```
## 実行
```concole
main.py
```

## 使用方法
1. 左上の設定から環境設定を開く(ウィンドウが開くまで時間がかかります)
   ![image](https://github.com/user-attachments/assets/46837574-427a-4ea8-8000-77314c891312)
3. Tesseract-OCRのフォルダパスを通す
4. ゲーム画面を映したカメラのIDを選択する
5. chrome.exeのパスを通す
6. 設定を更新してツールを再起動
7. キャプチャー起動ボタンを押す



### ※ゲーム画面を映したカメラIDがわからない場合
[カメラIDサーチャー](./Search_CameraID)を使用することで、アクティブになっているカメラを調べることが出来ます。

---
## 画面の見方
<p align="center">
  <img width=800 src=https://github.com/user-attachments/assets/db7f1b20-e29e-489b-a10b-03450a55d40b>
</p>

1. 現在の場に出ている相手のポケモン  
  ```盤面右上のポケモン名を読み取り表示```
2. 相手の手持ち一覧  
   ```対戦開始前の選出画面から読み取った相手の手持ち一覧```
   - アイコンを左クリックすることで、明暗の切り替えができる
3. 詳細メニュー  
   ```アイコン上で右クリックすることで表示```
   - Hashを追加
     - アイコン識別のためのHash値をcsvに追加する
   - Hashを更新
     -  登録済みのHash値を更新する  
       ```
       ※注意
       更新を押すと、アイコン横に表示されているポケモン名の識別が更新されます。
       ポケモン名とアイコンが一致している or 正しいポケモン名がカッコで囲われている場合にのみ操作してください
       ```
   - DBを検索
     - ポケモンデータベースで検索する
   - 詳細を表示
     - ポケモンの詳細情報を表示する


## 注意点
このツールは未完成版です。使用にあたって以下の問題が残存じています。
1. 動作が不安定
   - ウィンドウへのカメラ映像の描画や、その他操作時などに動作が重くなります
2. ポケモンの誤認識
   - 現在の場に出ているポケモンの認識は、ネームボックス上のポケモン名を認識しているため、誤認識が生じることがあります
   - また、フォルムの認識はすることが出来ないため、情報の表記に間違いがあることもあります
3. 手持ちポケモンのアイコン識別の誤認識
   - 現時点で手持ち一覧の識別が出来るポケモンはごく一部のみのため、識別出来ないポケモンが多々います
   - 登録されていないポケモンや、誤認識をしたポケモンがいた場合、自身で登録をしてください。


# 今後の展望
- 画像認識精度のブラッシュアップ
  - 選出画面アイコンでの判別から、3Dグラフィックからの画像認識へ
- 動作の安定化
  - 内部処理の効率化を進め、動作を安定させる
- ユーザーのソフトウェア操作の削減
  - ウィンドウの操作部分を減らし、画面表示の自動化を進める
- 相手パーティーの分析
  - パーティー構築の分析や過去に対戦した類似パーティなどの情報の表示
- 対戦ログ・戦績の記録
